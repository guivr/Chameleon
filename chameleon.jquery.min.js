function getContrast(t){var e=/\(([^)]+)\)/,a=e.exec(t),n=a[1].split(", "),r=n[0],s=n[1],o=n[2],i=(299*r+587*s+114*o)/1e3;return i>=128?"#000":"#fff"}function css(t){var e=document.styleSheets,a={};for(var n in e){var r=e[n].rules||e[n].cssRules;for(var s in r)t.is(r[s].selectorText)&&(a=$.extend(a,css2json(r[s].style),css2json(t.attr("style"))))}return a}function css2json(t){var e={};if(!t)return e;if(t instanceof CSSStyleDeclaration)for(var a in t)t[a].toLowerCase&&(e[t[a].toLowerCase()]=t[t[a]]);else if("string"==typeof t){t=t.split("; ");for(var a in t){var n=t[a].split(": ");e[n[0].toLowerCase()]=n[1]}}return e}!function(t){t.fn.chameleon=function(e){var a=t(this),n=e.mirror,r={},s=css(t(n));return void 0===e.colorContrast&&(e.colorContrast=!0),void 0===e.inheritAll&&(e.inheritAll=!1),t(this).hasClass("chameleon-listener")||(t(n).attrchange({callback:function(){a.chameleon({mirror:n,inheritAll:e.inheritAll,colorContrast:e.colorContrast,set:e.set})}}),t(this).addClass("chameleon-listener")),this.each(function(){if(e.inheritAll===!0)t(this).css(s);else{for(prop in e.set)r.backgroundColor&&e.colorContrast?"color"===prop&&(r[prop]=getContrast(t(n).css(e.set[prop]))):r[prop]=t(n).css(e.set[prop]);t(this).css(r)}})}}(jQuery),function(t){function e(){var t=document.createElement("p"),e=!1;if(t.addEventListener)t.addEventListener("DOMAttrModified",function(){e=!0},!1);else{if(!t.attachEvent)return!1;t.attachEvent("onDOMAttrModified",function(){e=!0})}return t.setAttribute("id","target"),e}function a(e,a){if(e){var n=this.data("attr-old-value");if(a.attributeName.indexOf("style")>=0){n.style||(n.style={});var r=a.attributeName.split(".");a.attributeName=r[0],a.oldValue=n.style[r[1]],a.newValue=r[1]+":"+this.prop("style")[t.camelCase(r[1])],n.style[r[1]]=a.newValue}else a.oldValue=n[a.attributeName],a.newValue=this.attr(a.attributeName),n[a.attributeName]=a.newValue;this.data("attr-old-value",n)}}var n=window.MutationObserver||window.WebKitMutationObserver;t.fn.attrchange=function(r,s){if(t(this).addClass("chameleon-listener"),"object"==typeof r){var o={trackValues:!1,callback:t.noop};if("function"==typeof r?o.callback=r:t.extend(o,r),o.trackValues&&this.each(function(e,a){for(var n,r={},e=0,s=a.attributes,o=s.length;o>e;e++)n=s.item(e),r[n.nodeName]=n.value;t(this).data("attr-old-value",r)}),n){var i={subtree:!1,attributes:!0,attributeOldValue:o.trackValues},c=new n(function(e){e.forEach(function(e){var a=e.target;o.trackValues&&(e.newValue=t(a).attr(e.attributeName)),"connected"===t(a).data("attrchange-status")&&o.callback.call(a,e)})});return this.data("attrchange-method","Mutation Observer").data("attrchange-status","connected").data("attrchange-obs",c).each(function(){c.observe(this,i)})}return e()?this.data("attrchange-method","DOMAttrModified").data("attrchange-status","connected").on("DOMAttrModified",function(e){e.originalEvent&&(e=e.originalEvent),e.attributeName=e.attrName,e.oldValue=e.prevValue,"connected"===t(this).data("attrchange-status")&&o.callback.call(this,e)}):"onpropertychange"in document.body?this.data("attrchange-method","propertychange").data("attrchange-status","connected").on("propertychange",function(e){e.attributeName=window.event.propertyName,a.call(t(this),o.trackValues,e),"connected"===t(this).data("attrchange-status")&&o.callback.call(this,e)}):this}return"string"==typeof r&&t.fn.attrchange.hasOwnProperty("extensions")&&t.fn.attrchange.extensions.hasOwnProperty(r)?t.fn.attrchange.extensions[r].call(this,s):void 0}}(jQuery);